# Evidec — Evidence Engine for Decision Making

> 意思決定のための証拠生成フレームワーク（Evidence Generation Framework for Decision Making）

## 1. プロジェクト概要（What is Evidec?）

**Evidec** は、データ分析を **"計算で終わらせず、意思決定につなぐ"** ための Python OSS です。

**Analyst（分析者）・PdM（プロダクトマネージャー）・Biz（事業責任者）** の3者が、共通の「証拠」を元に迅速かつ納得感のある意思決定を行える世界を目指します。

実務の現場では、以下のようなフローが分断されがちです：

```
実験設計 → 検定 → 結果解釈 → 意思決定（Go / No-Go）→ 根拠提示（Evidence Report）
```

**Evidec** はこの断絶を埋め、**実験から意思決定までの流れを一貫して扱えるフレームワーク**を提供します。

## 2. 解決したい課題（Problem）

### ● 分析はできるが、意思決定につながらない
多くの OSS は「検定」や「統計計算」までしか提供しません。最終的に必要なのは p値ではなく **「やるか・やらないか」の意思決定とその根拠** です。

### ● A/B テストごとに毎回スクリプトをスクラッチで作る非効率
実験設計・集計・検定・判定が毎回バラバラに実装されているため、再現性が低く、ミスの温床になります。

### ● 判断ルールが個人依存で、組織的に標準化されていない
なぜ判断が属人化するのでしょうか？
- 基準が Excel、スライド、メール、口頭などバラバラな場所に散在している
- 「p値 0.06 だけど、今回はビジネスインパクトが大きいからGoしよう」といった暗黙知がコード化されていない
- 担当する分析者によって、同じデータでも結論が変わってしまう

### ● 「なんでもt検定」による統計的妥当性の欠如
データが従う確率分布（Assumptions）を無視し、慣習的に「とりあえずt検定」を適用してしまうケースが散見されます。
例えば、CVの有無（0/1）はベルヌーイ試行であり、その平均（CVR）の差を見るなら、中心極限定理を前提とした **z検定（比率の差の検定）** が適切です。
**「前提に則した手法を使う」** ことを徹底しないと、そもそも難しい意思決定を間違えることになります。

**Evidec** は意思決定のロジックを **DecisionRule** として明文化し、**コードとして共有・再利用可能** にします。

## 3. Evidec が提供する価値（Value Proposition）

### 1. 実験設計 → 証拠生成 → 意思決定までを一貫提供
分断されていた分析フローを統合し、判断可能な証拠を自動生成します。

### 2. 意思決定の再現性と品質を向上
判断ロジックをコード化することで、チーム全体で統一した基準（Standardized Criteria）を適用できます。

### 3. 共通言語としての Evidence Report
**Evidec** が生成する **Evidence Report** は、非エンジニアでも理解可能な形式（テキスト/HTML）を目指します。これにより、分析者と経営層のコミュニケーションコストを劇的に下げます。

### 4. 確率分布（Assumptions）への厳格な準拠
Evidec は単なる計算機ではなく、**「そのデータはどの分布に従うか？」** を常に問いかけます。
不適切な検定手法の適用（Type I / Type II Error の増大要因）を防ぐため、メトリクスの性質（連続値、比率、回数など）に応じた **正しい検定手法の選択** をフレームワークとしてサポートします。

### 既存 OSS との差別化

| ツール | 主な守備範囲 | Evidec との違い |
| :--- | :--- | :--- |
| **statsmodels / scipy** | 統計検定・計算 | 計算のみ提供。解釈や意思決定は人間に委ねられる。 |
| **scikit-learn** | 機械学習・モデリング | 予測が主眼。因果推論やA/Bテストの意思決定フローは対象外。 |
| **CausalImpact / DoWhy** | 因果推論 | 「効果があったか」の特定に特化。「ビジネス判断としてGoすべきか」までは扱わない。 |
| **Evidec** | **意思決定・証拠化** | **計算結果をビジネス判断（Go/No-Go）に変換し、証拠レポートを出力する。** |

## 4. 主な機能スコープ（Scope）

初期開発（MVP）では、最も需要の高い **「比率検定 + DecisionRule + Report」** にフォーカスします。

### Design（実験設計）
- メトリクス定義（Conversion, RPU など）
- [Future] サンプルサイズ計算（Power, MDE）
- [Future] 実験期間の推計

### Validation（統計検証）
- **A/B テスト（比率検定 / t検定）** [MVP]
- 信頼区間計算
- [Future] ベイズ手法、多重検定補正

### Decision（意思決定ロジック）
- **DecisionRule** による Go / No-Go / Inconclusive 自動判定 [MVP]
- 判定理由の言語化
- 経営判断基準のテンプレート化

### Reporting（証拠化）
- **Evidence Report** の生成（Markdown / Text） [MVP]
- 統計結果の要約（Summary）
- 意思決定に必要な要点のみを抽出したドキュメント出力

## 5. Before / After：導入効果

**Before（現状）**
- 分析者が毎回スクラッチで検定スクリプトを書いている
- A/B テストの結果解釈が人によって微妙に異なる
- 「なぜその判断をしたのか？」の説明資料作成に時間がかかる
- 過去のテスト結果や判断基準が埋もれてしまい、再利用されない

**After（Evidec 導入後）**
- 実験 → 検定 → 意思決定 → レポートが数行のコードで再現可能
- 組織の判断ロジックがコード化され、誰が分析しても同じ基準で判断できる
- Biz / PdM がそのまま読める "証拠" が自動生成される
- 過去の意思決定ロジックが資産として残る

## 6. Non-goals（やらないこと）

スコープを明確にするため、以下は当面のスコープ外とします。

- **探索的データ分析（EDA）**: pandas や matplotlib 等の既存ツールに任せる
- **高度な因果推論モデリング**: 必要に応じて外部ライブラリと連携する形をとる
- **ダッシュボード UI の提供**: Evidec はあくまで「エンジン（ライブラリ）」であり、GUI は提供しない

## 7. 名前の由来（Naming Identity）

**名称：Evidec（エビデック）**

### 由来：
**Evidence（証拠） × Decision（意思決定）**

### 特徴：
- コンセプトを名前だけで説明できる
- テック感のある語感（Codec / Logic / Tech）
- 会話で呼びやすい「エビデック」
- 検索性・ブランド性が高い
- コードでの利用イメージも自然：`import evidec as ed`

## 8. タグライン（Tagline）

> **"Turn Data into Decision."**
> **データを、意思決定の「確かな証拠」へ。**

## 9. 初期 API イメージ（Interface Image）

```python
from evidec import Experiment, DecisionRule

# 1. 実験の定義
exp = Experiment(
    name="cta_color_test",
    metric="ctr",
    variant_names=["control", "treatment"]
)

# 2. 判断ルールの注入（組織の基準をコード化）
# 例: 有意差(p<0.05)があり、かつ改善幅(lift)が1%以上なら採用
rule = DecisionRule(
    alpha=0.05,
    min_lift=0.01,
    metric_goal="increase"
)

# 3. データの投入と判定
exp.fit(control_data, treatment_data)
decision = exp.judge(rule)

# 4. 証拠レポートの出力
print(decision.summary())
# Output:
# [GO] Treatment is significantly better.
# Confidence: 95%
# Lift: +2.3% (Target: >1.0%)
# P-value: 0.012
```

**設計思想：** 分析手順ではなく、意思決定の意図を記述するインターフェース。

## 10. 今後のステップ

- [ ] **MVP 実装**: 比率検定(z-test) + シンプルなDecisionRule + テキストレポート出力の実装
- [ ] **Core Interface 設計**: `Experiment` と `DecisionRule` のクラス設計詳細化
- [ ] **Directory Structure**: ドメイン駆動設計(DDD)を意識したパッケージ構成の検討
- [ ] **README**: コンセプトを反映したドキュメント作成
